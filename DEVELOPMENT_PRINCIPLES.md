# –ü—Ä–∏–Ω—Ü–∏–ø—ã –ë–µ–∑–æ–ø–∞—Å–Ω–æ–≥–æ –†–∞–∑–≤–∏—Ç–∏—è DAS

> **–ó–û–õ–û–¢–û–ï –ü–†–ê–í–ò–õ–û:** –ù–µ –ª–æ–º–∞—Ç—å —Ç–æ, —á—Ç–æ —É–∂–µ —Ä–∞–±–æ—Ç–∞–µ—Ç!

## 1. –°—Ç—Ä–∞—Ç–µ–≥–∏—è "–†–∞—Å—à–∏—Ä–µ–Ω–∏–µ, –Ω–µ –ó–∞–º–µ–Ω–∞"

### ‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û
- –î–æ–±–∞–≤–ª—è—Ç—å –Ω–æ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ —Ä—è–¥–æ–º —Å–æ —Å—Ç–∞—Ä—ã–º–∏
- –°–æ–∑–¥–∞–≤–∞—Ç—å –Ω–æ–≤—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã/—Å—Ç—Ä–∞–Ω–∏—Ü—ã –¥–ª—è —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–æ–≤
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å feature flags –¥–ª—è –ø–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ–≥–æ –≤–Ω–µ–¥—Ä–µ–Ω–∏—è

### ‚ùå –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û
- –ü–µ—Ä–µ–ø–∏—Å—ã–≤–∞—Ç—å —Ä–∞–±–æ—Ç–∞—é—â–∏–µ –º–æ–¥—É–ª–∏ "—Å –Ω—É–ª—è"
- –£–¥–∞–ª—è—Ç—å –∫–æ–¥ –±–µ–∑ –ø—Ä–æ–≤–µ—Ä–∫–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
- –ú–µ–Ω—è—Ç—å –±–∞–∑–æ–≤—ã–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–∞–Ω–Ω—ã—Ö –±–µ–∑ –º–∏–≥—Ä–∞—Ü–∏–∏

## 2. –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –®–∞–≥–∏ –ü–µ—Ä–µ–¥ –ò–∑–º–µ–Ω–µ–Ω–∏—è–º–∏

### –ë—ç–∫–∞–ø –ö—Ä–∏—Ç–∏—á–Ω—ã—Ö –ö–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
```bash
# –í—Å–µ–≥–¥–∞ —Å–æ—Ö—Ä–∞–Ω—è–π—Ç–µ –≤–µ—Ä—Å–∏—é –ø–µ—Ä–µ–¥ –±–æ–ª—å—à–∏–º–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è–º–∏
scripts\archive-version-simple.bat
scripts\backup-production.bat
```

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –õ–æ–∫–∞–ª—å–Ω–æ
- ‚úÖ –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ `localhost:3000`
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –æ—Å–Ω–æ–≤–Ω—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏
- ‚úÖ –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ —Å–±–æ—Ä–∫–∞ –ø—Ä–æ—Ö–æ–¥–∏—Ç (`npm run build`)

### –ü–æ—ç—Ç–∞–ø–Ω—ã–π –î–µ–ø–ª–æ–π
- ‚úÖ –î–µ–ø–ª–æ–π –≤ staging (preview –Ω–∞ Vercel)
- ‚úÖ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ staging
- ‚úÖ –¢–æ–ª—å–∫–æ –ø–æ—Ç–æ–º –¥–µ–ø–ª–æ–π –≤ production

## 3. –ó–æ–Ω—ã "–ù–µ –¢—Ä–æ–≥–∞—Ç—å –ë–µ–∑ –ö—Ä–∞–π–Ω–µ–π –ù–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏"

### –ö—Ä–∏—Ç–∏—á–Ω—ã–µ –ú–æ–¥—É–ª–∏
- `app/actions/norm-library.ts` - –ó–∞–≥—Ä—É–∑–∫–∞ –ù–î –∏ Storage
- `app/actions/storage.ts` - –§–æ—Ç–æ –∏ Evidence
- `scripts/parse-pdf-universal.js` - –ò–ò-–ø–∞—Ä—Å–µ—Ä
- `create_tables.sql` - –ë–∞–∑–æ–≤–∞—è —Å—Ö–µ–º–∞ –ë–î
- `utils/supabase/server.ts` - –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ Supabase

### üõ°Ô∏è –ñ–ï–õ–ï–ó–ù–û–ï –ü–†–ê–í–ò–õ–û: –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –õ–æ–≥–∏–∫–∏ (Legacy Preservation)
–ü—Ä–∏ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–µ –∫–ª—é—á–µ–≤—ã—Ö –∞–ª–≥–æ—Ä–∏—Ç–º–æ–≤ (–æ—Å–æ–±–µ–Ω–Ω–æ AI-–ø—Ä–æ–º–ø—Ç–æ–≤):
1. **–ó–ê–ü–†–ï–©–ï–ù–û** –ø–µ—Ä–µ–ø–∏—Å—ã–≤–∞—Ç—å –ø—Ä–æ–º–ø—Ç—ã –ø–æ –ø–∞–º—è—Ç–∏.
2. **–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û** –∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å working-logic ("—Ä–∞–±–æ—á—É—é –ª–æ–≥–∏–∫—É") –∏–∑ —Å—Ç–∞—Ä–æ–≥–æ —Ñ–∞–π–ª–∞ **–¥–æ—Å–∏–º–≤–æ–ª—å–Ω–æ**.
3. –ï—Å–ª–∏ —Å—Ç–∞—Ä—ã–π —Ñ–∞–π–ª (`scripts/*.js`) —Ä–∞–±–æ—Ç–∞–ª ‚Äî –µ–≥–æ –ª–æ–≥–∏–∫–∞ —Å—á–∏—Ç–∞–µ—Ç—Å—è "—ç—Ç–∞–ª–æ–Ω–æ–º" (Golden Standard). –õ—é–±–æ–µ –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ —Ç—Ä–µ–±—É–µ—Ç –æ–±–æ—Å–Ω–æ–≤–∞–Ω–∏—è –∏ —Ç–µ—Å—Ç–æ–≤.


### –ï—Å–ª–∏ –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û –Ω—É–∂–Ω–æ –º–µ–Ω—è—Ç—å:
1. **–°–æ–∑–¥–∞—Ç—å backup-—Ñ–∞–π–ª** (–Ω–∞–ø—Ä–∏–º–µ—Ä, `norm-library.ts.bak`)
2. **–î–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è** –≤ `CHANGELOG.md`
3. **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ –ª–æ–∫–∞–ª—å–Ω–æ–π –∫–æ–ø–∏–∏ –ë–î**, –Ω–µ –Ω–∞ production

## 4. –ü—Ä–∞–≤–∏–ª–∞ –†–∞–±–æ—Ç—ã —Å –ë–∞–∑–æ–π –î–∞–Ω–Ω—ã—Ö

### –ú–∏–≥—Ä–∞—Ü–∏–∏ –í–º–µ—Å—Ç–æ –ü—Ä—è–º—ã—Ö –ò–∑–º–µ–Ω–µ–Ω–∏–π
```sql
-- ‚ùå –ü–õ–û–•–û: ALTER TABLE users DROP COLUMN old_field;
-- ‚úÖ –•–û–†–û–®–û: –î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤–æ–µ, –æ—Å—Ç–∞–≤–∏—Ç—å —Å—Ç–∞—Ä–æ–µ –Ω–∞ –≤—Ä–µ–º—è –º–∏–≥—Ä–∞—Ü–∏–∏
ALTER TABLE users ADD COLUMN new_field TEXT;
-- –ü–æ—Ç–æ–º –ø–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ –º–∏–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ RLS –ü–æ–ª–∏—Ç–∏–∫
- –ù–æ–≤—ã–µ —Ç–∞–±–ª–∏—Ü—ã = –Ω–æ–≤—ã–µ RLS –ø–æ–ª–∏—Ç–∏–∫–∏
- –¢–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–æ–¥ —Ä–∞–∑–Ω—ã–º–∏ —Ä–æ–ª—è–º–∏ (admin, auditor, engineer)

## 5. –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ "Core + Flavor"

### Core (–ù–µ–ø—Ä–∏–∫–æ—Å–Ω–æ–≤–µ–Ω–Ω–æ–µ –Ø–¥—Ä–æ)
- –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è/–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è
- –ë–∞–∑–æ–≤—ã–µ CRUD –æ–ø–µ—Ä–∞—Ü–∏–∏
- Supabase Storage –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
- –û—Å–Ω–æ–≤–Ω—ã–µ Server Actions

### Flavor (–ë–µ–∑–æ–ø–∞—Å–Ω–∞—è –ó–æ–Ω–∞ –≠–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–æ–≤)
- –ù–æ–≤—ã–µ –≤–µ—Ä—Ç–∏–∫–∞–ª–∏ (MCHS, Energy, etc.)
- –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –æ—Ç—á–µ—Ç—ã
- UI —É–ª—É—á—à–µ–Ω–∏—è
- –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ —Ñ–∏—á–∏

**–ü—Ä–∏–Ω—Ü–∏–ø:** –ù–æ–≤—ã–µ —Ñ–∏—á–∏ —Ä–∞–∑—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è –≤ Flavor-—Å–ª–æ–µ –∏ –Ω–µ –ª–æ–º–∞—é—Ç Core.

## 6. –í–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –û—Ç–∫–∞—Ç—ã

### –°–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–æ–µ –í–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ
- **v0.X.Y** - Major.Minor.Patch
- **Patch (Y)**: –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –±–∞–≥–æ–≤, –Ω–µ –ª–æ–º–∞—é—â–∏–µ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª
- **Minor (X)**: –ù–æ–≤—ã–µ —Ñ–∏—á–∏, –æ–±—Ä–∞—Ç–Ω–æ —Å–æ–≤–º–µ—Å—Ç–∏–º—ã–µ
- **Major (0‚Üí1)**: –ü–µ—Ä–µ—Ö–æ–¥ –≤ production-ready

### –ë—ã—Å—Ç—Ä—ã–π –û—Ç–∫–∞—Ç
```bash
# –ï—Å–ª–∏ —á—Ç–æ-—Ç–æ —Å–ª–æ–º–∞–ª–æ—Å—å –ø–æ—Å–ª–µ –¥–µ–ø–ª–æ—è:
vercel rollback
# –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø—Ä–µ–¥—ã–¥—É—â–∏–π backup
```

## 7. –ö–æ–Ω—Ç—Ä–æ–ª—å–Ω—ã–π –ß–µ–∫–ª–∏—Å—Ç –ü–µ—Ä–µ–¥ –î–µ–ø–ª–æ–µ–º

- [ ] –õ–æ–∫–∞–ª—å–Ω–∞—è —Å–±–æ—Ä–∫–∞ —É—Å–ø–µ—à–Ω–∞ (`npm run build`)
- [ ] –û—Å–Ω–æ–≤–Ω—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω—ã –≤—Ä—É—á–Ω—É—é
- [ ] Backup –ë–î —Å–¥–µ–ª–∞–Ω (`backup-production.bat`)
- [ ] –ù–æ–≤—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∑–∞–¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω—ã –≤ `CHANGELOG.md`
- [ ] –ö—Ä–∏—Ç–∏—á–Ω—ã–µ –º–æ–¥—É–ª–∏ –Ω–µ –∏–∑–º–µ–Ω–µ–Ω—ã (–∏–ª–∏ –∏–∑–º–µ–Ω–µ–Ω—ã —Å backup)
- [ ] Feature flags –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã –¥–ª—è –ø–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ–≥–æ rollout

## 8. –ö—É–ª—å—Ç—É—Ä–∞ –†–∞–∑—Ä–∞–±–æ—Ç–∫–∏

### –ü—Ä–∏–Ω—Ü–∏–ø –ú–∏–Ω–∏–º–∞–ª—å–Ω–æ–≥–æ –í–º–µ—à–∞—Ç–µ–ª—å—Å—Ç–≤–∞
> "–ï—Å–ª–∏ —Ä–∞–±–æ—Ç–∞–µ—Ç ‚Äî –Ω–µ —á–∏–Ω–∏"

### –î–æ–∫—É–º–µ–Ω—Ç–∏—Ä—É–π –í—Å—ë
- –ö–∞–∂–¥–æ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ ‚Üí –∑–∞–ø–∏—Å—å –≤ `CHANGELOG.md`
- –ù–æ–≤–∞—è —Ñ–∏—á–∞ ‚Üí –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –≤ `docs/`
- –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ ‚Üí –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –≤ –∫–æ–¥–µ

### –û–±—â–∞–π—Å—è —Å –ö–æ–º–∞–Ω–¥–æ–π
- **–ü–µ—Ä–µ–¥ –∏–∑–º–µ–Ω–µ–Ω–∏–µ–º –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö –º–æ–¥—É–ª–µ–π:** —É–≤–µ–¥–æ–º–∏—Ç—å –¥—Ä—É–≥–∏—Ö –∏–Ω–∂–µ–Ω–µ—Ä–æ–≤
- **–ü–æ—Å–ª–µ –¥–µ–ø–ª–æ—è:** —Å–æ–æ–±—â–∏—Ç—å –æ –Ω–æ–≤—ã—Ö –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—è—Ö –∏ –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã—Ö —Ä–∏—Å–∫–∞—Ö

---

## üéØ –ì–ª–∞–≤–Ω–∞—è –¶–µ–ª—å

**–°–∏—Å—Ç–µ–º–∞ –¥–æ–ª–∂–Ω–∞ —Å—Ç–∞–Ω–æ–≤–∏—Ç—å—Å—è —Ç–æ–ª—å–∫–æ –õ–£–ß–®–ï –∏ –°–¢–ê–ë–ò–õ–¨–ù–ï–ï —Å –∫–∞–∂–¥—ã–º –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ–º.**

–ï—Å–ª–∏ –Ω–æ–≤–∞—è —Ñ–∏—á–∞ —Ä–∏—Å–∫—É–µ—Ç —Å–ª–æ–º–∞—Ç—å —Å—Ç–∞—Ä—É—é —Ä–∞–±–æ—Ç—É ‚Äî –ª—É—á—à–µ –æ—Ç–ª–æ–∂–∏—Ç—å –∏–ª–∏ –ø–µ—Ä–µ–æ—Å–º—ã—Å–ª–∏—Ç—å –ø–æ–¥—Ö–æ–¥.
